registerChannelProviderLocal firstTime true
#
# Start at "2021-W49-Dec08-1404-25-CET"
#
# Version information:
# European Spallation Source ERIC : iocsh.bash (3.4.1-PID-13984)
#
# --->--> snip -->--> 
# Please Use Version and other environment variables
# in order to report or debug this shell
#
# HOSTDISPLAY=""
# WINDOWID=""
# PWD="/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh"
# USER="anderssandstrom"
# LOGNAME="anderssandstrom"
# EPICS_HOST_ARCH="linux-x86_64"
# EPICS_BASE="/nfs/ts/epics/base-7.0.5"
# E3_REQUIRE_NAME="require"
# E3_REQUIRE_VERSION="3.4.1"
# E3_REQUIRE_LOCATION="/nfs/ts/epics/base-7.0.5/require/3.4.1"
# E3_REQUIRE_BIN="/nfs/ts/epics/base-7.0.5/require/3.4.1/bin"
# E3_REQUIRE_DB="/nfs/ts/epics/base-7.0.5/require/3.4.1/db"
# E3_REQUIRE_DBD="/nfs/ts/epics/base-7.0.5/require/3.4.1/dbd"
# E3_REQUIRE_INC="/nfs/ts/epics/base-7.0.5/require/3.4.1/include"
# E3_REQUIRE_LIB="/nfs/ts/epics/base-7.0.5/require/3.4.1/lib"
# EPICS_DRIVER_PATH="/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods:/nfs/ts/epics/base-7.0.5/require/3.4.1/siteApps"
# EPICS_CA_AUTO_ADDR_LIST=""
# EPICS_CA_ADDR_LIST=""
# PATH="/nfs/ts/epics/base-7.0.5/require/3.4.1/bin:/nfs/ts/epics/base-7.0.5/bin/linux-x86_64:/opt/conda/condabin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/anderssandstrom/.local/bin:/home/anderssandstrom/bin"
# --->--> snip -->--> 
#
# Set REQUIRE_IOC for its internal PVs
epicsEnvSet REQUIRE_IOC "REQMOD:ccpu-33584-004-13984"
#
# Enable an exit subroutine for sotfioc
dbLoadRecords "/nfs/ts/epics/base-7.0.5/db/softIocExit.db" "IOC=REQMOD:ccpu-33584-004-13984"
#
# Set E3_IOCSH_TOP for the absolute path where iocsh.bash is executed.
epicsEnvSet E3_IOCSH_TOP "/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh"
#
# 
# Load require module, which has the version 3.4.1
# 
dlload /nfs/ts/epics/base-7.0.5/require/3.4.1/lib/linux-x86_64/librequire.so
dbLoadDatabase /nfs/ts/epics/base-7.0.5/require/3.4.1/dbd/require.dbd
require_registerRecordDeviceDriver
Loading module info records for require
# 
# Set E3_CMD_TOP for the absolute path where mrf.script exists
epicsEnvSet E3_CMD_TOP "/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh"
#
iocshLoad 'mrf.script',''
#!/usr/bin/env iocsh.bash
epicsEnvSet "PEVR" "LAB-MOT:Ctrl-EVR-1"
# [common]
epicsEnvSet "IOCNAME" "LAB-MOT:Ctrl-EVR-1"
epicsEnvSet "IOCDIR" "./"
epicsEnvSet "AS_TOP" "./"
epicsEnvSet "LOG_SERVER_NAME" "172.16.107.59"
require essioc
Module essioc version 0.6.1+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/essioc/0.6.1+0/
Module essioc depends on autosave 5.10.2+0
Module autosave version 5.10.2+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/autosave/5.10.2+0/
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/autosave/5.10.2+0/lib/linux-x86_64/libautosave.so
Loaded autosave version 5.10.2+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/autosave/5.10.2+0/dbd/autosave.dbd
Calling function autosave_registerRecordDeviceDriver
Loading module info records for autosave
Module essioc depends on caputlog 3.7.0+0
Module caputlog version 3.7.0+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/caputlog/3.7.0+0/
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/caputlog/3.7.0+0/lib/linux-x86_64/libcaputlog.so
Loaded caputlog version 3.7.0+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/caputlog/3.7.0+0/dbd/caputlog.dbd
Calling function caputlog_registerRecordDeviceDriver
Loading module info records for caputlog
Module essioc depends on auth 0.2.2+0
Module auth version 0.2.2+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0/
Module auth has no library
Loading module info records for auth
Module essioc depends on iocstats 3.1.16+0
Module iocstats version 3.1.16+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/iocstats/3.1.16+0/
Module iocstats depends on calc 3.7.4+0
Module calc version 3.7.4+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/calc/3.7.4+0/
Module calc depends on sequencer 2.2.8+0
Module sequencer version 2.2.8+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/sequencer/2.2.8+0/
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/sequencer/2.2.8+0/lib/linux-x86_64/libsequencer.so
Loaded sequencer version 2.2.8+0
sequencer has no dbd file
Loading module info records for sequencer
Module calc depends on sscan 2.11.4+0
Module sscan version 2.11.4+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/sscan/2.11.4+0/
Module sscan depends on sequencer 2.2.8+0
Module sequencer version 2.2.8+0 already loaded
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/sscan/2.11.4+0/lib/linux-x86_64/libsscan.so
Loaded sscan version 2.11.4+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/sscan/2.11.4+0/dbd/sscan.dbd
Calling function sscan_registerRecordDeviceDriver
Loading module info records for sscan
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/calc/3.7.4+0/lib/linux-x86_64/libcalc.so
Loaded calc version 3.7.4+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/calc/3.7.4+0/dbd/calc.dbd
Calling function calc_registerRecordDeviceDriver
Loading module info records for calc
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/iocstats/3.1.16+0/lib/linux-x86_64/libiocstats.so
Loaded iocstats version 3.1.16+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/iocstats/3.1.16+0/dbd/iocstats.dbd
Calling function iocstats_registerRecordDeviceDriver
Loading module info records for iocstats
Module essioc depends on recsync 1.3.0-eb33785
Module recsync version 1.3.0-eb33785 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/recsync/1.3.0-eb33785/
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/recsync/1.3.0-eb33785/lib/linux-x86_64/librecsync.so
Loaded recsync version 1.3.0-eb33785
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/recsync/1.3.0-eb33785/dbd/recsync.dbd
Calling function recsync_registerRecordDeviceDriver
Loading module info records for recsync
Module essioc has no library
Loading module info records for essioc
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/essioc/0.6.1+0//common_config.iocsh")
# set EPICS environment variables
# The following variables are expected to be defined in the IOC shell environment:
## IOCNAME - unique name for this IOC
# Define other environment variables from shell environment, with suitable defaults
## Autosave environment variables
epicsEnvSet("AS_TOP", "./")
## Logging environment variables
epicsEnvSet("LOG_SERVER_NAME", "172.16.107.59")
epicsEnvSet("ERRORLOG_SERVER_PORT", "9001")
epicsEnvSet("CAPUTLOG_SERVER_PORT", "9001")
epicsEnvSet("FACNAME", "")
## Access security environment variables
epicsEnvSet("PATH_TO_ASG_FILES", "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0/")
epicsEnvSet("ASG_FILENAME", "unrestricted_access.acf")
# set up recsync
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/recsync/1.3.0-eb33785//recsync.iocsh")
var(reccastTimeout, "5.0")
var(reccastMaxHoldoff, "5.0")
dbLoadRecords("reccaster.db", "P=LAB-MOT:Ctrl-EVR-1:RecSync-")
# set up iocStats
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/iocstats/3.1.16+0//iocStats.iocsh")
# ### IOCSTATS iocsh  ###
dbLoadRecords("iocAdminSoft-ess.db", "IOC=LAB-MOT:Ctrl-EVR-1")
# set up autosave
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/autosave/5.10.2+0//autosave.iocsh", "AS_TOP=./, IOCNAME=LAB-MOT:Ctrl-EVR-1, IOCDIR=./")
##############################################################################
####                         AUTOSAVE iocsh                                ###
##############################################################################
set_savefile_path    (".//./", "/save")
set_requestfile_path (".//./", "/req")
#
system("install -d .//.//save")
system("install -d .//.//req")
save_restoreSet_status_prefix("LAB-MOT:Ctrl-EVR-1:as-")
save_restoreSet_Debug(0)
save_restoreSet_IncompleteSetsOk(1)
save_restoreSet_DatedBackupFiles(1)
save_restoreSet_NumSeqFiles(3)
save_restoreSet_SeqPeriodInSeconds(300)
save_restoreSet_CAReconnect(1)
save_restoreSet_CallbackTimeout(-1)
set_pass0_restoreFile("settings.sav")
set_pass0_restoreFile("values_pass0.sav")
set_pass1_restoreFile("settings.sav")
set_pass1_restoreFile("values_pass1.sav")
dbLoadRecords("save_restoreStatus.db", "P=LAB-MOT:Ctrl-EVR-1:as-, DEAD_SECONDS=5")
afterInit("makeAutosaveFileFromDbInfo('.//.//req/settings.req','autosaveFields')")
afterInit("makeAutosaveFileFromDbInfo('.//.//req/values_pass0.req','autosaveFields_pass0')")
afterInit("makeAutosaveFileFromDbInfo('.//.//req/values_pass1.req','autosaveFields_pass1')")
afterInit("create_monitor_set('settings.req','5')")
afterInit("create_monitor_set('values_pass0.req','5')")
afterInit("create_monitor_set('values_pass1.req','10')")
# set up logging
## IOC shell logging
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/essioc/0.6.1+0//iocLog.iocsh", "LOG_INET=172.16.107.59,LOG_INET_PORT=9001,FACNAME=,IOCNAME=LAB-MOT:Ctrl-EVR-1")
epicsEnvSet(EPICS_IOC_LOG_INET, "172.16.107.59")
epicsEnvSet(EPICS_IOC_LOG_PORT, "9001")
epicsEnvSet(iocLogDisable, "0")
iocLogPrefix("fac= proc=LAB-MOT:Ctrl-EVR-1");
# require has afterInit function
afterInit("iocLogInit()")
## caput logging
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/caputlog/3.7.0+0//caPutLog.iocsh", "LOG_INET=172.16.107.59,LOG_INET_PORT=9001")
afterInit("caPutLogInit 172.16.107.59:9001 0")
# set up access security
# disable for now due to failing test
iocshLoad("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0//accessSecurityGroup.iocsh", "ASG_PATH=/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0/,ASG_FILE=unrestricted_access.acf")
epicsEnvSet(ASG_FULL_PATH_TO_ACCESS_SECURITY, "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0/")
epicsEnvSet(ASG_FILENAME, "unrestricted_access.acf")
epicsEnvSet(ASG_SET_SUBSTITUTIONS_STRINGS, "")
asSetFilename("/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/auth/0.2.2+0//unrestricted_access.acf")
asSetSubstitutions("")
# [module]
require "mrfioc2" "2.3.1+1"
Module mrfioc2 version 2.3.1+1 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1/
Module mrfioc2 depends on devlib2 2.11.0+0
Module devlib2 version 2.11.0+0 found in /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/devlib2/2.11.0+0/
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/devlib2/2.11.0+0/lib/linux-x86_64/libdevlib2.so
Loaded devlib2 version 2.11.0+0
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/devlib2/2.11.0+0/dbd/devlib2.dbd
Calling function devlib2_registerRecordDeviceDriver
Loading module info records for devlib2
Loading library /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1/lib/linux-x86_64/libmrfioc2.so
Loaded mrfioc2 version 2.3.1+1
Loading dbd file /nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1/dbd/mrfioc2.dbd
Calling function mrfioc2_registerRecordDeviceDriver
Loading module info records for mrfioc2
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrEss.iocsh"     "P=LAB-MOT:Ctrl-EVR-1,PCIID=08:00.0,INTPPS=,EXTPPS=#"
# @about: evrEss.iocsh
# ====================
# [ENV]
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//envEss.iocsh"
# @about: envEss.iocsh
# ====================
# Special events
epicsEnvSet EvtHBeat 122
epicsEnvSet EvtSeqEnd 127
# Master Events mostly for the ScTable
# Sync to https://gitlab.esss.lu.se/icshwi/reftabs/-/blob/master/init/sceconfig-ess.yml
epicsEnvSet EvtLebtCpOff 6
epicsEnvSet EvtLebtCpOn 7
epicsEnvSet EvtMebtCpHead 8
epicsEnvSet EvtMebtCpTail 9
epicsEnvSet EvtIonMagSt 10
epicsEnvSet EvtIonMagEnd 11
epicsEnvSet EvtBPulseSt 12
epicsEnvSet EvtBPulseEnd 13
epicsEnvSet EvtRFSt 15
epicsEnvSet EvtCEnd 17 # exists by default
epicsEnvSet EvtBIAcqSt 18
epicsEnvSet EvtBIAcqEnd 19
# Test events mostly for the EvtTable
epicsEnvSet EvtF0Hz5 60
epicsEnvSet EvtF1Hz 122 # exists by default
epicsEnvSet EvtF2Hz 61
epicsEnvSet EvtF3Hz5 62
epicsEnvSet EvtF7Hz 63
epicsEnvSet EvtF14Hz 14 # exists by default
epicsEnvSet EvtPMortem 40
epicsEnvSet EvtPMortemSys 41
epicsEnvSet EvtDoD 42
epicsEnvSet EvtDoDSys 43
# Configure other defaults
epicsNotice: devPCIFindSpec() expect B:D.F in hex
Failed to open resource file for PCI device 0000:08:00.0: Permission denied
Found SFP Strangeness 00000000
filename="../dbStatic/dbLexRoutines.c" line number=271
No such file or directory dbRead opening file evr-soft-ts.db
dbLoadRecords: failed to load 'evr-soft-ts.db'
EnvSet TrWidthDft 100        #[ns]
epicsEnvSet BWidthDft 2860000     #[ns]
epicsEnvSet DlyComp 10000         #[ns]
# Configure the counters
epicsEnvSet Mxc14Hz 6289464
epicsEnvSet Mxc1Hz 88052496
# [CORE]
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evr.iocsh"       "P=LAB-MOT:Ctrl-EVR-1,PCIID=08:00.0,EVRDB=evr-mtca-300-univ.db,FEVT=88.0525"
# @about: evr.iocsh
# The timestamp error margin
var evrMrmTimeNSOverflowThreshold 10000000
mrmEvrSetupPCI "EVR" "08:00.0"
Device EVR  8:0.0 slot=1-1
Using IRQ 142
FWVersion 0x18070207
Found version 519
Sequencer capability detected
mTCA: Out FP:4 FPUNIV:18 RB:0 IFP:32 GPIO:2
EVR FIFO task start
Enabling interrupts
dbLoadRecords "evr-mtca-300-univ.db" "P=LAB-MOT:Ctrl-EVR-1,EVR=EVR,FEVT=88.0525"
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrEvtEss.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrEvtEss.iocsh
# =======================
# SYNC
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:F14Hz,       OBJ=EVR, CODE=14,       EVNT=14"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:LebtCpOff,   OBJ=EVR, CODE=6,   EVNT=6"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:LebtCpOn,    OBJ=EVR, CODE=7,    EVNT=7"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:MebtCpHead,  OBJ=EVR, CODE=8,  EVNT=8"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:MebtCpTail,  OBJ=EVR, CODE=9,  EVNT=9"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:IonMagSt,    OBJ=EVR, CODE=10,    EVNT=10"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:IonMagEnd,   OBJ=EVR, CODE=11,   EVNT=11"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:BPulseSt,    OBJ=EVR, CODE=12,    EVNT=12"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:BPulseEnd,   OBJ=EVR, CODE=13,   EVNT=13"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:RFSt,        OBJ=EVR, CODE=15,        EVNT=15"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:BIAcqSt,     OBJ=EVR, CODE=18,     EVNT=18"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:BIAcqEnd,    OBJ=EVR, CODE=19,    EVNT=19"
# ASYN
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:PMortem,     OBJ=EVR, CODE=40,     EVNT=40"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:PMortemSys,  OBJ=EVR, CODE=41,  EVNT=41"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:DoD,         OBJ=EVR, CODE=42,         EVNT=42"
dbLoadRecords "evrevent.db" "EN=LAB-MOT:Ctrl-EVR-1:DoDSys,      OBJ=EVR, CODE=43,      EVNT=43"
dbLoadRecords "evr-databuffer-ess.db"      "P=LAB-MOT:Ctrl-EVR-1"
dbLoadRecords "evr-soft-ts.db"             "P=LAB-MOT:Ctrl-EVR-1,PV=TSstringin,EVT=F14HzCnt-I"
# [INIT]
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrBase.iocsh" "P=LAB-MOT:Ctrl-EVR-1,INTPPS=,EXTPPS=#"
# @about: evrr.iocsh
# ===================
#Disable not used FIFO traffic: 0 cannot be applied
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtA-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtB-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtC-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtD-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtE-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtF-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtG-SP.OUT" "@OBJ=EVR,Code=255"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:EvtH-SP.OUT" "@OBJ=EVR,Code=255"
# Enable EVR
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Ena-Sel" "Enabled"
# Set delay compensation to X ns, needed to avoid timestamp issue
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:DC-Tgt-SP" "10000"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:DC-Ena-Sel" "Enable"
# Set the LED event 0 to event 14
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Evt-Blink0-SP" "14"
# TIMESTAMP CONFIGURATION
# 0-disabled: EVT_PPS comes from evg; 1-external; 2-Sys.Clock: locally generated EVT_PPS
#afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:TimeSrc-Sel" "0"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:TimeSrc-Sel" "2"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Time-I.EVNT"   "125"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Time-I.INP"    "@OBJ=EVR, Code=125"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Time-Clock-SP" "88.0525"
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrEvtClka.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrEvtClka.iocsh
# ========================
# Configure CLKA backplane clock
### Set TCLKA to low, enable it and power it up
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Src-SP" "63"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Ena-Sel" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pwr-Sel" "1"
## Generate CLKA event clock, so 88MHz
#### TCLKA is 40-bit pattern, set the starting 20 bits to 1 (and the rest to 0 - default)
## it does not work dbpf $(P)$(R=)$(S=":")OutTCLKA-Pat-Low00_15-SP 0xffff
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BF" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BE" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BD" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BC" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BB" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BA" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B9" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B8" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B7" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B6" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B5" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B4" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B3" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B2" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B1" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B0" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BF" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BE" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BD" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BC" "1"
## Duty Cycle correction to 50%
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BB" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BA" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B9" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B8" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B7" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B6" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B5" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B4" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B3" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B2" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B1" "1"
afterInit "dbpf" "LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B0" "1"
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//seq0Ess.r.iocsh"  "P=LAB-MOT:Ctrl-EVR-1"
# @about: seq0Ess.r.iocsh
epicsEnvSet "EvtSeqEss" "15 14 10 11 6 7 8 9 12 13 15 18 19 17 122 127"
epicsEnvSet "TimestampSeqEss" "15 0 100 200 300 400 500 600 700 800 900 1000 1100 1200 1300 71428"
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Disable-Cmd" "1"
dbpf only works after iocInit
# Set up the evr prescalers that will trigger the sequencer at 14Hz and 1Hz ###
dbpf "LAB-MOT:Ctrl-EVR-1:PS-0-Div-SP" "6289464"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:PS-1-Div-SP" "88052496"
dbpf only works after iocInit
# Set up the sequencer
## EVR: Set the trigger of the sequencer as Prescaler 0 for 14Hz and Prescaler 1 for 1Hz
## EVG: Set Mxc0 for 14Hz or Mxc7 for 1Hz
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-TrigSrc-2-Sel" "Prescaler 0"
dbpf only works after iocInit
#dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-TrigSrc-2-Sel" "Prescaler 1"
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-TrigSrc-Sel" "Mxc0"
PV 'LAB-MOT:Ctrl-EVR-1:SoftSeq-0-TrigSrc-Sel' not found
#dbpf "LAB-MOT:Ctrl-EVR-1Channel connect timed out: 'LAB-MOT:Ctrl-EVR-1:SoftSeq-0-EvtCode-SP' not found.
Channel connect timed out: 'LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Timestamp-SP' not found.
:SoftSeq-0-TrigSrc-Sel" "Mxc7"
# Set the engineering units (microseconds)
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-TsResolution-Sel" "uSec"
dbpf only works after iocInit
# Set the runmode to normal, so that the sequencer re-arms after it finishes running
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-RunMode-Sel" "Normal"
dbpf only works after iocInit
# Event code 14 (14 Hz), 127 is the end of sequence
system "caput -a LAB-MOT:Ctrl-EVR-1:SoftSeq-0-EvtCode-SP 15 14 10 11 6 7 8 9 12 13 15 18 19 17 122 127"
# Defining time at which the event codes are sent in us (timestamps)
system "caput -a LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Timestamp-SP 15 0 100 200 300 400 500 600 700 800 900 1000 1100 1200 1300 71428"
# Attach the soft sequence to a specific hardware sequence
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Load-Cmd" "1"
dbpf only works after iocInit
# Commit the sequence to HW
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Commit-Cmd" "1"
dbpf only works after iocInit
# Enable the sequencer
dbpf "LAB-MOT:Ctrl-EVR-1:SoftSeq-0-Enable-Cmd" "1"
dbpf only works after iocInit
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrGenericEss.load.r.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrGenericEss.load.r.iocsh
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrDlyGenEss.r.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrDlyGenEss.r.iocsh
### Labels
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-0-Label-I"  "EvtF14Hz"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-1-Label-I"  "EvtRFSt"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-2-Label-I"  "EvtBPulseSt"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-3-Label-I"  "EvtBPulseEnd"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-4-Label-I"  "EvtIonMagSt"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-5-Label-I"  "EvtIonMagEnd"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-6-Label-I"  "EvtPMortem"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-7-Label-I"  "EvtDoD"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-8-Label-I"  "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-9-Label-I"  "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-10-Label-I" "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-11-Label-I" "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-12-Label-I" "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-13-Label-I" "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-14-Label-I" "-"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-15-Label-I" "-"
dbpf only works after iocInit
# Define pulsers - width
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-0-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-1-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-2-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-3-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-4-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-5-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-6-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-7-Width-SP"  "100"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-8-Width-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-9-Width-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-10-Width-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-11-Width-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-12-Width-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-13-Width-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-14-Width-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-15-Width-SP" "0"
dbpf only works after iocInit
### Define pulsers - trigger events
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-0-Evt-Trig0-SP"  "14"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-1-Evt-Trig0-SP"  "15"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-2-Evt-Trig0-SP"  "12"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-3-Evt-Trig0-SP"  "13"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-4-Evt-Trig0-SP"  "10"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-5-Evt-Trig0-SP"  "11"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-6-Evt-Trig0-SP"  "40"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-7-Evt-Trig0-SP"  "42"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-8-Evt-Trig0-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-9-Evt-Trig0-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-10-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-11-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-12-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-13-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-14-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-15-Evt-Trig0-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-0-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-1-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-2-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-3-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-4-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-5-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-6-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-7-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-8-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-9-Evt-Trig1-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-10-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-11-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-12-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-13-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-14-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-15-Evt-Trig1-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-0-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-1-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-2-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-3-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-4-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-5-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-6-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-7-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-8-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-9-Evt-Trig2-SP"  "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-10-Evt-Trig2-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-11-Evt-Trig2-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-12-Evt-Trig2-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-13-Evt-Trig2-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-14-Evt-Trig2-SP" "0"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:DlyGen-15-Evt-Trig2-SP" "0"
dbpf only works after iocInit
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrOutEss.r.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrOutEss.r.iocsh
# BP Labels
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back0-Label-I" "EvtF14Hz"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back1-Label-I" "EvtRFSt"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back2-Label-I" "EvtBPulse"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back3-Label-I" "EvtIonMag"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back4-Label-I" "EvtPMortem"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back5-Label-I" "EvtDoD"
dbpf only works after iocInit
#dbpf "$(P)$(R=)$(S=:)Out-Back6-Label-I" ""
#dbpf "$(P)$(R=)$(S=:)Out-Back7-Label-I" ""
# BP SRC configuration
### MTCA EVR Backplane0, RX17 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back0-Src-SP" "0"
dbpf only works after iocInit
### MTCA EVR Backplane1, TX17 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back1-Src-SP" "1"
dbpf only works after iocInit
### MTCA EVR Backplane2, RX18 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back2-Src-SP" "49"
dbpf only works after iocInit
### MTCA EVR Backplane3, TX18 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back3-Src-SP" "50"
dbpf only works after iocInit
### MTCA EVR Backplane4, RX19 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back4-Src-SP" "6"
dbpf only works after iocInit
### MTCA EVR Backplane5, TX19 (0)
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back5-Src-SP" "7"
dbpf only works after iocInit
### MTCA EVR Backplane6, RX20 (0)
# dbpf "$(P)$(R=)$(S=:)Out-Back6-Src-SP" "8"
### MTCA EVR Backplane7, TX20 (0)
# dbpf "$(P)$(R=)$(S=:)Out-Back7-Src-SP" "9"
# FP outputs
# dbpf "$(P)$(R=)$(S=:)Out-FP0-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FP1-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FP2-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FP3-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FPUV0-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FPUV1-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FPUV2-Src-SP" "15"
# dbpf "$(P)$(R=)$(S=:)Out-FPUV3-Src-SP" "15"
iocshLoad "/nfs/ts/epics/base-7.0.5/require/3.4.1/siteMods/mrfioc2/2.3.1+1//evrInEss.r.iocsh" "P=LAB-MOT:Ctrl-EVR-1"
# @about: evrInEss.r.iocsh
# BP Labels
#dbpf "$(P)$(R=)$(S=:)Out-Back0-Label-I" "EvtF14Hz"
#dbpf "$(P)$(R=)$(S=:)Out-Back1-Label-I" "EvtRFSt"
#dbpf "$(P)$(R=)$(S=:)Out-Back2-Label-I" "EvtBPulse"
#dbpf "$(P)$(R=)$(S=:)Out-Back3-Label-I" "EvtIonMag"
#dbpf "$(P)$(R=)$(S=:)Out-Back4-Label-I" "EvtPMortem"
#dbpf "$(P)$(R=)$(S=:)Out-Back5-Label-I" "EvtDoD"
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back6-Label-I" "EvtPMortemSys"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back7-Label-I" "EvtDoDSys"
dbpf only works after iocInit
# BP inputs
#dbpf "$(P)$(R=)$(S=:)Out-Back0-Src-Scale-SP" "Tri-state"
#dbpf "$(P)$(R=)$(S=:)Out-Back1-Src-Scale-SP" "Tri-state"
#dbpf "$(P)$(R=)$(S=:)Out-Back2-Src-Scale-SP" "Tri-state"
#dbpf "$(P)$(R=)$(S=:)Out-Back3-Src-Scale-SP" "Tri-state"
#dbpf "$(P)$(R=)$(S=:)Out-Back4-Src-Scale-SP" "Tri-state"
#dbpf "$(P)$(R=)$(S=:)Out-Back5-Src-Scale-SP" "Tri-state"
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back6-Src-Scale-SP" "Tri-state"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:Out-Back7-Src-Scale-SP" "Tri-state"
dbpf only works after iocInit
#dbpf "$(P)$(R=)$(S=:)BPIn-0-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)BPIn-1-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)BPIn-2-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)BPIn-3-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)BPIn-4-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)BPIn-5-Trig-Ext-Sel" "Edge"
dbpf "LAB-MOT:Ctrl-EVR-1:BPIn-6-Trig-Ext-Sel" "Edge"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:BPIn-7-Trig-Ext-Sel" "Edge"
dbpf only works after iocInit
# Local EVR events
#dbpf "$(P)$(R=)$(S=:)BPIn-0-Code-Ext-SP" "0"
#dbpf "$(P)$(R=)$(S=:)BPIn-1-Code-Ext-SP" "0"
#dbpf "$(P)$(R=)$(S=:)BPIn-2-Code-Ext-SP" "0"
#dbpf "$(P)$(R=)$(S=:)BPIn-3-Code-Ext-SP" "0"
#dbpf "$(P)$(R=)$(S=:)BPIn-4-Code-Ext-SP" "0"
#dbpf "$(P)$(R=)$(S=:)BPIn-5-Code-Ext-SP" "0"
dbpf "LAB-MOT:Ctrl-EVR-1:BPIn-6-Code-Ext-SP" "41"
dbpf only works after iocInit
dbpf "LAB-MOT:Ctrl-EVR-1:BPIn-7-Code-Ext-SP" "43"
dbpf only works after iocInit
# Front panel inputs
#dbpf "$(P)$(R=)$(S=:)In-0-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)In-1-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)In-2-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=Starting iocInit
reboot_restore: entry for file 'settings.sav'
reboot_restore: Found filename 'settings.sav' in restoreFileList.
*** restoring from './/./save/settings.sav' at initHookState 6 (before record/device init) ***
reboot_restore: done with file 'settings.sav'

reboot_restore: entry for file 'values_pass0.sav'
reboot_restore: Found filename 'values_pass0.sav' in restoreFileList.
*** restoring from './/./save/values_pass0.sav' at initHookState 6 (before record/device init) ***
reboot_restore: done with file 'values_pass0.sav'

reboot_restore: entry for file 'settings.sav'
reboot_restore: Found filename 'settings.sav' in restoreFileList.
*** restoring from './/./save/settings.sav' at initHookState 7 (after record/device init) ***
reboot_restore: done with file 'settings.sav'

reboot_restore: entry for file 'values_pass1.sav'
reboot_restore: Found filename 'values_pass1.sav' in restoreFileList.
*** restoring from './/./save/values_pass1.sav' at initHookState 7 (after record/device init) ***
reboot_restore: done with file 'values_pass1.sav'

iocRun: All initialization complete
sevr=info caPutLog: successfully initialized
log client: connected to log server at '172.16.107.59:9001'
log client: connected to log server at '172.16.107.59:9001'
:)In-3-Trig-Ext-Sel" "Edge"
# Univ inputs
#dbpf "$(P)$(R=)$(S=:)UnivIn-0-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)UnivIn-1-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)UnivIn-2-Trig-Ext-Sel" "Edge"
#dbpf "$(P)$(R=)$(S=:)UnivIn-3-Trig-Ext-Sel" "Edge"
# Local EVR events for FP
#dbpf "$(P)$(R=)$(S=:)In-0-Code-Ext-SP" "$(FPE0=0)"
#dbpf "$(P)$(R=)$(S=:)In-1-Code-Ext-SP" "$(FPE1=0)"
#dbpf "$(P)$(R=)$(S=:)In-2-Code-Ext-SP" "$(FPE2=0)"
#dbpf "$(P)$(R=)$(S=:)In-3-Code-Ext-SP" "$(FPE3=0)"
# Local EVR events for UNIV
#dbpf "$(P)$(R=)$(S=:)UnivIn-0-Code-Ext-SP" "$(UVE0=0)"
#dbpf "$(P)$(R=)$(S=:)UnivIn-1-Code-Ext-SP" "$(UVE1=0)"
#dbpf "$(P)$(R=)$(S=:)UnivIn-2-Code-Ext-SP" "$(UVE2=0)"
#dbpf "$(P)$(R=)$(S=:)UnivIn-3-Code-Ext-SP" "$(UVE3=0)"
# Set the IOC Prompt String One 
epicsEnvSet IOCSH_PS1 "ccpu-33584-004-13984 > "
#
# 
iocInit
############################################################################
## EPICS R7.0.5-E3-7.0.5-patch
## Rev. 2021-03-19T04:42+0100
############################################################################
Set EVR clock 88052500.000000
Given length is not a multiple of 20 (CML word size). Truncating...
Given length is not a multiple of 20 (CML word size). Truncating...
makeAutosaveFileFromDbInfo('.//.//req/settings.req','autosaveFields')
makeAutosaveFileFromDbInfo('.//.//req/values_pass0.req','autosaveFields_pass0')
makeAutosaveFileFromDbInfo('.//.//req/values_pass1.req','autosaveFields_pass1')
create_monitor_set('settings.req','5')
create_monitor_set('values_pass0.req','5')
settings.sav: 1 of 1 PV's connected
create_monitor_set('values_pass1.req','10')
iocLogInit()
caPutLogInit 172.16.107.59:9001 0
dbpf LAB-MOT:Ctrl-EVR-1:EvtA-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtB-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtC-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtD-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtE-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtF-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtG-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:EvtH-SP.OUT '@OBJ=EVR,Code=255'
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf LAB-MOT:Ctrl-EVR-1:Ena-Sel Enabled
DBF_STRING:         "Enabled" 
dbpf LAB-MOT:Ctrl-EVR-1:DC-Tgt-SP 10000
DBF_DOUBLE:         10000     
dbpf LAB-MOT:Ctrl-EVR-1:DC-Ena-Sel Enable
DBF_STRING:         "Enable"  
dbpf LAB-MOT:Ctrl-EVR-1:Evt-Blink0-SP 14
DBF_LONG:           14 = 0xe  
dbpf LAB-MOT:Ctrl-EVR-1:TimeSrc-Sel 2
DBF_STRING:         "Sys. Clock"        
dbpf LAB-MOT:Ctrl-EVR-1:Time-I.EVNT 125
DBF_STRING:         "125"     
dbpf LAB-MOT:Ctrl-EVR-1:Time-I.INP '@OBJ=EVR, Code=125'
DBF_STRING:         "@OBJ=EVR, Code=125"          
dbpf LAB-MOT:Ctrl-EVR-1:Time-Clock-SP 88.0525
DBF_DOUBLE:         88.0525   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Src-SP 63
DBF_LONG:           63 = 0x3f 
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Ena-Sel 1
DBF_STRING:         "Enabled" 
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pwr-Sel 1
DBF_STRING:         "On"      
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BF 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BE 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BD 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BC 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BB 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.BA 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B9 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B8 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B7 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B6 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B5 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B4 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B3 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B2 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B1 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low00_15-SP.B0 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BF 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BE 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BD 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BC 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BB 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.BA 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B9 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B8 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B7 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B6 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B5 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B4 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B3 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B2 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B1 1
DBF_UCHAR:          1 = 0x1   
dbpf LAB-MOT:Ctrl-EVR-1:Out-TCLKA-Pat-Low16_31-SP.B0 1
DBF_UCHAR:          1 = 0x1   
[?1034hccpu-33584-004-13984 > 