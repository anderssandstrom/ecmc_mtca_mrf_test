## 
## Better support for Real-Time IOC Application.
## Now we set 'export LD_BIND_NOW=1'
## If one may meet the 'Operation not permitted' message, 
## please run iocsh without the real-time option
##
#
# Start at "2022-W23-Jun09-1443-45-CEST"
#
# Version information:
# European Spallation Source ERIC : iocsh (4.0.0-PID-5806)
#
# --->--> snip -->--> 
# Please Use Version and other environment variables
# in order to report or debug this shell
#
# HOSTDISPLAY=""
# WINDOWID=""
# PWD="/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh_real"
# USER="anderssandstrom"
# LOGNAME="anderssandstrom"
# EPICS_HOST_ARCH="linux-x86_64"
# EPICS_BASE="/epics/base-7.0.6.1"
# E3_REQUIRE_NAME="require"
# E3_REQUIRE_VERSION="4.0.0"
# E3_REQUIRE_LOCATION="/epics/base-7.0.6.1/require/4.0.0"
# E3_REQUIRE_BIN="/epics/base-7.0.6.1/require/4.0.0/bin"
# E3_REQUIRE_DB="/epics/base-7.0.6.1/require/4.0.0/db"
# E3_REQUIRE_DBD="/epics/base-7.0.6.1/require/4.0.0/dbd"
# E3_REQUIRE_INC="/epics/base-7.0.6.1/require/4.0.0/include"
# E3_REQUIRE_LIB="/epics/base-7.0.6.1/require/4.0.0/lib"
# EPICS_DRIVER_PATH="/epics/base-7.0.6.1/require/4.0.0/siteMods"
# EPICS_CA_AUTO_ADDR_LIST=""
# EPICS_CA_ADDR_LIST=""
# EPICS_PVA_AUTO_ADDR_LIST=""
# EPICS_PVA_ADDR_LIST=""
# PATH="/epics/base-7.0.6.1/require/4.0.0/bin:/epics/base-7.0.6.1/bin/linux-x86_64:/home/anderssandstrom/.conda/envs/mrfconda/epics/bin/linux-x86_64:/usr/condabin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/anderssandstrom/.local/bin:/home/anderssandstrom/bin"
# --->--> snip -->--> 
#
# Set REQUIRE_IOC for its internal PVs
epicsEnvSet REQUIRE_IOC "REQMOD:lab-mot-ctrl-cp-5806"
#
# Enable an exit subroutine for sotfioc
dbLoadRecords "/epics/base-7.0.6.1/db/softIocExit.db" "IOC=REQMOD:lab-mot-ctrl-cp-5806"
#
# Set E3_IOCSH_TOP for the absolute path where iocsh is executed.
epicsEnvSet E3_IOCSH_TOP "/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh_real"
#
# 
# Load require module, which has the version 4.0.0
# 
dlload /epics/base-7.0.6.1/require/4.0.0/lib/linux-x86_64/librequire.so
dbLoadDatabase /epics/base-7.0.6.1/require/4.0.0/dbd/require.dbd
require_registerRecordDeviceDriver
Loading module info records for require
# 
# Set E3_CMD_TOP for the absolute path where st.mrfioc_nanos.cmd exists
epicsEnvSet E3_CMD_TOP "/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh_real"
#
iocshLoad 'st.mrfioc_nanos.cmd',''
#!/usr/bin/env iocsh.bash
#require(essioc)
require mrfioc2 asm_add_nanos
Module mrfioc2 version asm_add_nanos found in /home/anderssandstrom/sources/e3-mrfioc2/cellMods//base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos/
Module mrfioc2 depends on devlib2 2.11.0+0
Module devlib2 version 2.11.0+0 found in /epics/base-7.0.6.1/require/4.0.0/siteMods/devlib2/2.11.0+0/
Loading library /epics/base-7.0.6.1/require/4.0.0/siteMods/devlib2/2.11.0+0/lib/linux-x86_64/libdevlib2.so
Loaded devlib2 version 2.11.0+0
Loading dbd file /epics/base-7.0.6.1/require/4.0.0/siteMods/devlib2/2.11.0+0/dbd/devlib2.dbd
Calling function devlib2_registerRecordDeviceDriver
Loading module info records for devlib2
Loading library /home/anderssandstrom/sources/e3-mrfioc2/cellMods//base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos/lib/linux-x86_64/libmrfioc2.so
Loaded mrfioc2 version asm_add_nanos
Loading dbd file /home/anderssandstrom/sources/e3-mrfioc2/cellMods//base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos/dbd/mrfioc2.dbd
Calling function mrfioc2_registerRecordDeviceDriver
Loading module info records for mrfioc2
require(evr_seq_calc)
Module evr_seq_calc version 1.0.0+0 found in /epics/base-7.0.6.1/require/4.0.0/siteMods/evr_seq_calc/1.0.0+0/
Loading library /epics/base-7.0.6.1/require/4.0.0/siteMods/evr_seq_calc/1.0.0+0/lib/linux-x86_64/libevr_seq_calc.so
Loaded evr_seq_calc version 1.0.0+0
Loading dbd file /epics/base-7.0.6.1/require/4.0.0/siteMods/evr_seq_calc/1.0.0+0/dbd/evr_seq_calc.dbd
Calling function evr_seq_calc_registerRecordDeviceDriver
Loading module info records for evr_seq_calc
#require(cntpstats)
require(mcoreutils)
Module mcoreutils version 1.2.2+0 found in /epics/base-7.0.6.1/require/4.0.0/siteMods/mcoreutils/1.2.2+0/
Loading library /epics/base-7.0.6.1/require/4.0.0/siteMods/mcoreutils/1.2.2+0/lib/linux-x86_64/libmcoreutils.so
Loaded mcoreutils version 1.2.2+0
Loading dbd file /epics/base-7.macLib: macro essioc_DIR is undefined (expanding string iocshLoad("$(essioc_DIR)/essioc.iocsh"))
Notice: devPCIFindSpec() expect B:D.F in hex
Failed to open resource file for PCI device 0000:08:00.0: Permission denied
Found SFP Strangeness 00000000
0.6.1/require/4.0.0/siteMods/mcoreutils/1.2.2+0/dbd/mcoreutils.dbd
Calling function mcoreutils_registerRecordDeviceDriver
MCoreUtils version 1.2.2+0
MCoreUtils: Read 0 thread rule(s) from /etc/rtrules
MCoreUtils: Read 0 thread rule(s) from /home/anderssandstrom/.rtrules
Loading module info records for mcoreutils
#require "mrfioc2" "2.3.1-beta.5"
#epicsEnvSet "LOCATION" "MCAG_LAB"
#epicsEnvSet "FBS" "??"
#epicsEnvSet "PEVR" "IOC_MRF_ECMC"
#epicsEnvSet "DIREVR" "/home/anderssandstrom/sources/e3ioc-mebtws-evr/aux/"
#epicsEnvSet "EVREVTARGS" "N0=F14Hz,E0=14,N1=LEBTCSt,E1=6,N2=LEBTCEnd,E2=7,N3=MEBTCSt,E3=8,N4=MEBTCEnd,E4=9,N5=IonMagSt,E5=10,N6=IonMagEnd,E6=11,N7=BPulseSt,E7=12,N8=BPulseEnd,E8=13,N9=RFSt,E9=15,NA=PMortem,EA=40,NB=PMortemSys,EB=41,NC=DoD,EC=42,ND=DoDSys,ED=43"
#epicsEnvSet "EVRDLYGENARGS" "W0=1000,E0T0=14,W1=1000,E1T0=15,W2=10,E2T0=12,W3=10,E3T0=13,W4=1000,E4T0=125,W5=1000,E5T0=40,W7=1000,E7T0=42,W8=10,E8T0=10,W9=10,E9T0=11,W10=10,E10T0=7,W11=10,E11T0=6"
#epicsEnvSet "EVROUTARGS" "BP0=0,BP1=1,BP2=49,BP3=4,BP4=5,BP6=7,FPUV0=52,FP0=53"
#epicsEnvSet "EVRINARGS" "BP5EN=,BPE5=41,BP7EN=,BPE7=43"
epicsEnvSet "PCIID" "8:00.0"
mcoreThreadRuleAdd ecmc * * 2 EVRFIFO
epicsEnvSet("TOP", "/home/anderssandstrom/sources/ecmc_mtca_mrf_test/iocsh_real/..")
epicsEnvSet("IOC", "mcag-evr-01")
epicsEnvSet("SYS", "MCAG:")
epicsEnvSet("EVR", "EVR-01")
epicsEnvSet("DEV", "TS-EVR-01")
epicsEnvSet("SYSPV", "MCAG:TS-EVR-01")
epicsEnvSet("MRF_HW_DB", "evr-pcie-300dc-univ.db")
epicsEnvSet("BASEEVTNO", "21")
epicsEnvSet("BASEEVTNO", "21")
epicsEnvSet("CHOP_DRV", "ECMC")
#time2ntp($(DEV), 2)
# -----------------------------------------------------------------------------
# loading databases
# -----------------------------------------------------------------------------
# E3 Common databases
iocshLoad("/home/anderssandstrom/sources/e3-mrfioc2/cellMods/base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos//evr.iocsh", "EVRDB=evr-pcie-300dc-univ.db, P=MCAG:TS-EVR-01, EVR=EVR, PCIID=8:00.0")
# @about: evr.iocsh
mrmEvrSetupPCI "EVR" "8:00.0"
Device EVR  8:0.0 slot=1-1
Using IRQ 142
FWVersion 0x18070207
Found version 519
Sequencer capability detected
mTCA: Out FP:4 FPUNIV:0 RB:16 IFP:32 GPIO:2
EVR FIFO task start
Enabling interrupts
dbLoadRecords "evr-pcie-300dc-univ.db" "P=MCAG:TS-EVR-01, EVR=EVR, FEVT=88.0525"
var evrMrmTimeNSOverflowThreshold 500000000
iocshLoad("/home/anderssandstrom/sources/e3-mrfioc2/cellMods/base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos//evrevt.iocsh", "P=MCAG:TS-EVR-01")
# @about: evrevt.iocsh
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN0, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN1, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN2, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN3, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN4, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN5, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN6, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN7, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN8, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTN9, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTNA, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTNB, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTNC, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTND, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTNE, OBJ=EVR, CODE=255, EVNT=255"
dbLoadRecords "evrevent.db" "EN=MCAG:TS-EVR-01:EVTNF, OBJ=EVR, CODE=255, EVNT=255"
#dbLoadRecords("mrmevrtsbuf-univ.db","P=$(SYSPV), R="", S=":00-", EVR=EVR, CODE=21, TRIG=14, FLUSH=TimesRelPrevFlush, NELM=1000")
#dbLoadRecords("mrmevrtsbuf-univ.db","P=$(SYSPV), R="", S=":01-", EVR=EVR, CODE=22, TRIG=14, FLUSH=TimesRmacLib: macro cntpstats_DIR is undefined (expanding string iocshLoad("$(cntpstats_DIR)/cntpstats.iocsh","SYS=$(SYS), DEV=$(DEV)"))
Starting iocInit
MCAG:TS-EVR-01:Out-RB02-Ena-SP: failed to find/create object 'EVR:FrontUnivOut2' : Object not found : EVR:FrontUnivOut2
MCAG:TS-EVR-01:Out-RB03-Ena-SP: failed to find/create object 'EVR:FrontUnivOut3' : Object not found : EVR:FrontUnivOut3
MCAG:TS-EVR-01:Out-RB04-Ena-SP: failed to find/create object 'EVR:FrontUnivOut4' : Object not found : EVR:FrontUnivOut4
MCAG:TS-EVR-01:Out-RB05-Ena-SP: failed to find/create object 'EVR:FrontUnivOut5' : Object not found : EVR:FrontUnivOut5
MCAG:TS-EVR-01:Out-RB06-Ena-SP: failed to find/create object 'EVR:FrontUnivOut6' : Object not found : EVR:FrontUnivOut6
MCAG:TS-EVR-01:Out-RB07-Ena-SP: failed to find/create object 'EVR:FrontUnivOut7' : Object not found : EVR:FrontUnivOut7
MCAG:TS-EVR-01:Out-RB08-Ena-SP: failed to find/create object 'EVR:FrontUnivOut8' : Object not found : EVR:FrontUnivOut8
MCAG:TS-EVR-01:Out-RB09-Ena-SP: failed to find/create object 'EVR:FrontUnivOut9' : Object not found : EVR:FrontUnivOut9
MCAG:TS-EVR-01:Out-RB10-Ena-SP: failed to find/create object 'EVR:FrontUnivOut10' : Object not found : EVR:FrontUnivOut10
MCAG:TS-EVR-01:Out-RB11-Ena-SP: failed to find/create object 'EVR:FrontUnivOut11' : Object not found : EVR:FrontUnivOut11
MCAG:TS-EVR-01:Out-RB02-Src-RB_: failed to find/create object 'EVR:FrontUnivOut2' : Object not found : EVR:FrontUnivOut2
MCAG:TS-EVR-01:Out-RB02-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut2' : Object not found : EVR:FrontUnivOut2
MCAG:TS-EVR-01:Out-RB03-Src-RB_: failed to find/create object 'EVR:FrontUnivOut3' : Object not found : EVR:FrontUnivOut3
MCAG:TS-EVR-01:Out-RB03-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut3' : Object not found : EVR:FrontUnivOut3
MCAG:TS-EVR-01:Out-RB04-Src-RB_: failed to find/create object 'EVR:FrontUnivOut4' : Object not found : EVR:FrontUnivOut4
MCAG:TS-EVR-01:Out-RB04-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut4' : Object not found : EVR:FrontUnivOut4
MCAG:TS-EVR-01:Out-RB05-Src-RB_: failed to find/create object 'EVR:FrontUnivOut5' : Object not found : EVR:FrontUnivOut5
MCAG:TS-EVR-01:Out-RB05-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut5' : Object not found : EVR:FrontUnivOut5
MCAG:TS-EVR-01:Out-RB06-Src-RB_: failed to find/create object 'EVR:FrontUnivOut6' : Object not found : EVR:FrontUnivOut6
MCAG:TS-EVR-01:Out-RB06-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut6' : Object not found : EVR:FrontUnivOut6
MCAG:TS-EVR-01:Out-RB07-Src-RB_: failed to find/create object 'EVR:FrontUnivOut7' : Object not found : EVR:FrontUnivOut7
MCAG:TS-EVR-01:Out-RB07-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut7' : Object not found : EVR:FrontUnivOut7
MCAG:TS-EVR-01:Out-RB08-Src-RB_: failed to find/create object 'EVR:FrontUnivOut8' : Object not found : EVR:FrontUnivOut8
MCAG:TS-EVR-01:Out-RB08-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut8' : Object not found : EVR:FrontUnivOut8
MCAG:TS-EVR-01:Out-RB09-Src-RB_: failed to find/create object 'EVR:FrontUnivOut9' : Object not found : EVR:FrontUnivOut9
MCAG:TS-EVR-01:Out-RB09-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut9' : Object not found : EVR:FrontUnivOut9
MCAG:TS-EVR-01:Out-RB10-Src-RB_: failed to find/create object 'EVR:FrontUnivOut10' : Object not found : EVR:FrontUnivOut10
MCAG:TS-EVR-01:Out-RB10-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut10' : Object not found : EVR:FrontUnivOut10
MCAG:TS-EVR-01:Out-RB11-Src-RB_: failed to find/create object 'EVR:FrontUnivOut11' : Object not found : EVR:FrontUnivOut11
MCAG:TS-EVR-01:Out-RB11-Src2-RB_: failed to find/create object 'EVR:FrontUnivOut11' : Object not found : EVR:FrontUnivOut11
MCAG:TS-EVR-01:Out-RB02-Src-SP: failed to find/create object 'EVR:FrontUnivOut2' : Object not found : EVR:FrontUnivOut2
MCAG:TS-EVR-01:Out-RB02-Src2-SP: failed to find/create object 'EVR:FrontUnivOut2' : Object not found : EVR:FrontUnivOut2
MCAG:TS-EVR-01:Out-RB03-Src-SP: failed to find/create object 'EVR:FrontUnivOut3' : Object not found : EVR:FrontUnivOut3
MCAG:TS-EVR-01:Out-RB03-Src2-SP: failed to find/create object 'EVR:FrontUnivOut3' : Object not found : EVR:FrontUnivOut3
MCAG:TS-EVR-01:Out-RB04-Src-SP: failed to find/create object 'EVR:FrontUnivOut4' : Object not found : EVR:FrontUnivOut4
MCAG:TS-EVR-01:Out-RB04-Src2-SP: failed to find/create object 'EVR:FrontUnivOut4' : Object not found : EVR:FrontUnivOut4
MCAG:TS-EVR-01:Out-RB05-Src-SP: failed to find/create object 'EVR:FrontUnivOut5' : Object not found : EVR:FrontUnivOut5
MCAG:TS-EVR-01:Out-RB05-Src2-SP: failed to find/create object 'EVR:FrontUnivOut5' : Object not found : EVR:FrontUnivOut5
MCAG:TS-EVR-01:Out-RB06-Src-SP: failed to find/create object 'EVR:FrontUnivOut6' : Object not found : EVR:FrontUnivOut6
MCAG:TS-EVR-01:Out-RB06-Src2-SP: failed to find/create object 'EVR:FrontUnivOut6' : Object not found : EVR:FrontUnivOut6
MCAG:TS-EVR-01:Out-RB07-Src-SP: failed to find/create object 'EVR:FrontUnivOut7' : Object not found : EVR:FrontUnivOut7
MCAG:TS-EVR-01:Out-RB07-Src2-SP: failed to find/create object 'EVR:FrontUnivOut7' : Object not found : EVR:FrontUnivOut7
MCAG:TS-EVR-01:Out-RB08-Src-SP: failed to find/create object 'EVR:FrontUnivOut8' : Object not found : EVR:FrontUnivOut8
MCAG:TS-EVR-01:Out-RB08-Src2-SP: failed to find/create object 'EVR:FrontUnivOut8' : Object not found : EVR:FrontUnivOut8
MCAG:TS-EVR-01:Out-RB09-Src-SP: failed to find/create object 'EVR:FrontUnivOut9' : Object not found : EVR:FrontUnivOut9
MCAG:TS-EVR-01:Out-RB09-Src2-SP: failed to find/create object 'EVR:FrontUnivOut9' : Object not found : EVR:FrontUnivOut9
MCAG:TS-EVR-01:Out-RB10-Src-SP: failed to find/create object 'EVR:FrontUnivOut10' : Object not found : EVR:FrontUnivOut10
MCAG:TS-EVR-01:Out-RB10-Src2-SP: failed to find/create object 'EVR:FrontUnivOut10' : Object not found : EVR:FrontUnivOut10
MCAG:TS-EVR-01:Out-RB11-Src-SP: failed to find/create object 'EVR:FrontUnivOut11' : Object not found : EVR:FrontUnivOut11
MCAG:TS-EVR-01:Out-RB11-Src2-SP: failed to find/create object 'EVR:FrontUnivOut11' : Object not found : EVR:FrontUnivOut11
iocRun: All initialization complete
Starting NTP SHM writer for segment 2
elPrevFlush, NELM=1000")
#dbLoadRecords("mrmevrtsbuf-univ.db","P=$(SYSPV), R="", S=":02-", EVR=EVR, CODE=23, TRIG=14, FLUSH=TimesRelPrevFlush, NELM=1000")
#dbLoadRecords("mrmevrtsbuf-univ.db","P=$(SYSPV), R="", S=":03-", EVR=EVR, CODE=24, TRIG=14, FLUSH=TimesRelPrevFlush, NELM=1000")
time2ntp("EVR", 2)
# Load the sequencer configuration script
#iocshLoad("$(evr_seq_calc_DIR)/evr_seq_calc.iocsh", "P=$(SYS), R=$(CHOP_DRV), EVR=$(DEV):, BASEEVTNO=$(BASEEVTNO)")
iocInit()
############################################################################
## EPICS R7.0.6.1-E3-7.0.6.1-patch
## Rev. 2022-03-11T15:27+0100
############################################################################
Set EVR clock 88052500.000000
iocshLoad("/home/anderssandstrom/sources/e3-mrfioc2/cellMods/base-7.0.6.1/require-4.0.0/mrfioc2/asm_add_nanos//evr.r.iocsh", "P=MCAG:TS-EVR-01, EVR=EVR")
# @about: evr.r.iocsh
#Disable not used FIFO traffic: 0 cannot be applied
dbpf "MCAG:TS-EVR-01:EvtA-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtB-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtC-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtD-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtE-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtF-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtG-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
dbpf "MCAG:TS-EVR-01:EvtH-SP.OUT" "@OBJ=EVR,Code=255"
DBF_STRING:         "@OBJ=EVR,Code=255" 
# Enable EVR
dbpf "MCAG:TS-EVR-01:Ena-Sel" "Enabled"
DBF_STRING:         "Enabled" 
# Set delay compensation to X ns, needed to avoid timestamp issue
dbpf "MCAG:TS-EVR-01:DC-Tgt-SP" "10000"
DBF_DOUBLE:         10000     
dbpf "MCAG:TS-EVR-01:DC-Ena-Sel" "Enable"
DBF_STRING:         "Enable"  
# Set the LED event 0 to event 14
dbpf "MCAG:TS-EVR-01:Evt-Blink0-SP" "14"
DBF_LONG:           14 = 0xe  
# TIMESTAMP CONFIGURATION
# 0-disabled: EVT_PPS comes from evg; 1-external; 2-Sys.Clock: locally generated EVT_PPS
dbpf "MCAG:TS-EVR-01:TimeSrc-Sel" "0"
DBF_STRING:         "Disable (noop)"    
#dbpf "MCAG:TS-EVR-01:TimeSrc-Sel" "2"
dbpf "MCAG:TS-EVR-01:Time-I.EVNT" "125"
DBF_STRING:         "125"     
dbpf "MCAG:TS-EVR-01:Time-I.INP" "@OBJ=EVR, Code=125"
DBF_STRING:         "@OBJ=EVR, Code=125"          
# Add proper ns calculation reference for the rf ticks
dbpf "MCAG:TS-EVR-01:Link-Clk-SP" "88.0525"
Set EVR clock 88052500.000000
DBF_DOUBLE:         88.0525   
dbpf "MCAG:TS-EVR-01:Time-Clock-SP" "88.0525"
DBF_DOUBLE:         88.0525   
######### INPUTS #########
# Trig-Ext-Sel changed from "Off" to "Edge", Code-Ext-SP changed from 0 to 10
dbpf MCAG:TS-EVR-01:UnivIn-0-Lvl-Sel "Active High"
PV 'MCAG:TS-EVR-01:UnivIn-0-Lvl-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-0-Edge-Sel "Active Rising"
PV 'MCAG:TS-EVR-01:UnivIn-0-Edge-Sel' not found
dbpf MCAG:TS-EVR-01:Out-RB00-Src-SP 61
DBF_LONG:           61 = 0x3d 
dbpf MCAG:TS-EVR-01:UnivIn-0-Trig-Ext-Sel "Edge"
PV 'MCAG:TS-EVR-01:UnivIn-0-Trig-Ext-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-0-Trig-Back-Sel "Off"
PV 'MCAG:TS-EVR-01:UnivIn-0-Trig-Back-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-0-Code-Ext-SP 21
PV 'MCAG:TS-EVR-01:UnivIn-0-Code-Ext-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-0-Code-Back-SP 0
PV 'MCAG:TS-EVR-01:UnivIn-0-Code-Back-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-1-Lvl-Sel "Active High"
PV 'MCAG:TS-EVR-01:UnivIn-1-Lvl-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-1-Edge-Sel "Active Rising"
PV 'MCAG:TS-EVR-01:UnivIn-1-Edge-Sel' not found
dbpf MCAG:TS-EVR-01:Out-RB01-Src-SP 61
DBF_LONG:           61 = 0x3d 
dbpf MCAG:TS-EVR-01:UnivIn-1-Trig-Ext-Sel "Edge"
PV 'MCAG:TS-EVR-01:UnivIn-1-Trig-Ext-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-1-Trig-Back-Sel "Off"
PV 'MCAG:TS-EVR-01:UnivIn-1-Trig-Back-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-1-Code-Ext-SP 22
PV 'MCAG:TS-EVR-01:UnivIn-1-Code-Ext-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-1-Code-Back-SP 0
PV 'MCAG:TS-EVR-01:UnivIn-1-Code-Back-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-2-Lvl-Sel "Active High"
PV 'MCAG:TS-EVR-01:UnivIn-2-Lvl-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-2-Edge-Sel "Active Rising"
PV 'MCAG:TS-EVR-01:UnivIn-2-Edge-Sel' not found
dbpf MCAG:TS-EVR-01:Out-RB02-Src-SP 61
DBF_LONG:           61 = 0x3d 
dbpf MCAG:TS-EVR-01:UnivIn-2-Trig-Ext-Sel "Edge"
PV 'MCAG:TS-EVR-01:UnivIn-2-Trig-Ext-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-2-Trig-Back-Sel "Off"
PV 'MCAG:TS-EVR-01:UnivIn-2-Trig-Back-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-2-Code-Ext-SP 23
PV 'MCAG:TS-EVR-01:UnivIn-2-Code-Ext-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-2-Code-Back-SP 0
PV 'MCAG:TS-EVR-01:UnivIn-2-Code-Back-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-3-Lvl-Sel "Active High"
PV 'MCAG:TS-EVR-01:UnivIn-3-Lvl-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-3-Edge-Sel "Active Rising"
PV 'MCAG:TS-EVR-01:UnivIn-3-Edge-Sel' not found
dbpf MCAG:TS-EVR-01:Out-RB03-Src-SP 61
DBF_LONG:           61 = 0x3d 
dbpf MCAG:TS-EVR-01:UnivIn-3-Trig-Ext-Sel "Edge"
PV 'MCAG:TS-EVR-01:UnivIn-3-Trig-Ext-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-3-Trig-Back-Sel "Off"
PV 'MCAG:TS-EVR-01:UnivIn-3-Trig-Back-Sel' not found
dbpf MCAG:TS-EVR-01:UnivIn-3-Code-Ext-SP 24
PV 'MCAG:TS-EVR-01:UnivIn-3-Code-Ext-SP' not found
dbpf MCAG:TS-EVR-01:UnivIn-3-Code-Back-SP 0
PV 'MCAG:TS-EVR-01:UnivIn-3-Code-Back-SP' not found
dbpf MCAG:TS-EVR-01:EvtA-SP.OUT "@OBJ=EVR,Code=10" 
DBF_STRING:         "@OBJ=EVR,Code=10"  
dbpf MCAG:TS-EVR-01:EvtA-SP.VAL 10 
DBF_LONG:           10 = 0xa  
dbpf MCAG:TS-EVR-01:EvtB-SP.OUT "@OBJ=EVR,Code=11" 
DBF_STRING:         "@OBJ=EVR,Code=11"  
dbpf MCAG:TS-EVR-01:EvtB-SP.VAL 11 
DBF_LONG:           11 = 0xb  
dbpf MCAG:TS-EVR-01:EvtC-SP.OUT "@OBJ=EVR,Code=12" 
DBF_STRING:         "@OBJ=EVR,Code=12"  
dbpf MCAG:TS-EVR-01:EvtC-SP.VAL 12
DBF_LONG:           12 = 0xc  
dbpf MCAG:TS-EVR-01:EvtD-SP.OUT "@OBJ=EVR,Code=13"
DBF_STRING:         "@OBJ=EVR,Code=13"  
dbpf MCAG:TS-EVR-01:EvtD-SP.VAL 13
DBF_LONG:           13 = 0xd  
dbpf MCAG:TS-EVR-01:EvtE-SP.OUT "@OBJ=EVR,Code=14"
DBF_STRING:         "@OBJ=EVR,Code=14"  
dbpf MCAG:TS-EVR-01:EvtE-SP.VAL 14
DBF_LONG:           14 = 0xe  
dbpf MCAG:TS-EVR-01:EvtF-SP.OUT "@OBJ=EVR,Code=15"
DBF_STRING:         "@OBJ=EVR,Code=15"  
dbpf MCAG:TS-EVR-01:EvtF-SP.VAL 15
DBF_LONG:           15 = 0xf  
dbpf MCAG:TS-EVR-01:EvtG-SP.OUT "@OBJ=EVR,Code=16"
DBF_STRING:         "@OBJ=EVR,Code=16"  
dbpf MCAG:TS-EVR-01:EvtG-SP.VAL 16
DBF_LONG:           16 = 0x10 
dbpf MCAG:TS-EVR-01:EvtH-SP.OUT "@OBJ=EVR,Code=17"
DBF_STRING:         "@OBJ=EVR,Code=17"  
dbpf MCAG:TS-EVR-01:EvtH-SP.VAL 17
DBF_LONG:           17 = 0x11 
dbpf MCAG:TS-EVR-01:EvtH-SP.OUT "@OBJ=EVR,Code=18"
DBF_STRING:         "@OBJ=EVR,Code=18"  
dbpf MCAG:TS-EVR-01:EvtH-SP.VAL 18
DBF_LONG:           18 = 0x12 
dbpf MCAG:TS-EVR-01:EvtH-SP.OUT "@OBJ=EVR,Code=19"
DBF_STRING:         "@OBJ=EVR,Code=19"  
dbpf MCAG:TS-EVR-01:EvtH-SP.VAL 19
DBF_LONG:           19 = 0x13 
dbpf MCAG:TS-EVR-01:EvtH-SP.OUT "@OBJ=EVR,Code=20"
DBF_STRING:         "@OBJ=EVR,Code=20"  
dbpf MCAG:TS-EVR-01:EvtH-SP.VAL 20
DBF_LONG:           20 = 0x14 
######### OUTPUTS #########
#Set up delay generator 0 to trigger on event 14
dbpf MCAG:TS-EVR-01:DlyGen-0-Width-SP 1000 #1ms
DBF_DOUBLE:         1000      
dbpf MCAG:TS-EVR-01:DlyGen-0-Delay-SP 0 #0ms
DBF_DOUBLE:         0         
dbpf MCAG:TS-EVR-01:DlyGen-0-Evt-Trig0-SP 14
DBF_LONG:           14 = 0xe  
dbpf MCAG:TS-EVR-01:DlyGen-1-Evt-Trig0-SP 14
DBF_LONG:           14 = 0xe  
dbpf MCAG:TS-EVR-01:DlyGen-1-Width-SP 2860 #1ms
DBF_DOUBLE:         2860      
dbpf MCAG:TS-EVR-01:DlyGen-1-Delay-SP 0 #0ms
DBF_DOUBLE:         0         
dbpf MCAG:TS-EVR-01:DlyGen-2-Width-SP 1000 #1ms
DBF_DOUBLE:         1000      
dbpf MCAG:TS-EVR-01:DlyGen-2-Delay-SP 0 #0ms
DBF_DOUBLE:         0         
dbpf MCAG:TS-EVR-01:DlyGen-2-Evt-Trig0-SP 14
DBF_LONG:           14 = 0xe  
dbpf MCAG:TS-EVR-01:DlyGen-3-Width-SP 1000 #1ms
DBF_DOUBLE:         1000      
dbpf MCAG:TS-EVR-01:DlyGen-3-Delay-SP 0 #0ms
DBF_DOUBLE:         0         
dbpf MCAG:TS-EVR-01:DlyGen-3-Evt-Trig0-SP 18
DBF_LONG:           18 = 0x12 
# 88052496/11073=7952Hz
dbpf MCAG:TS-EVR-01:PS-0-Div-SP 11073 
DBF_LONG:           11073 = 0x2b41      
#dbpf $(SYSPV):Out-RB04-Src-SP "Pulser 2"
#dbpf $(SYSPV):Out-RB05-Src-SP "Pulser 2"
#dbpf $(SYSPV):Out-RB06-Src-SP "Pulser 2"
#dbpf $(SYSPV):Out-RB07-Src-SP "Pulser 2"
dbpf MCAG:TS-EVR-01:Out-RB04-Src-Scale-SP "Prescaler 0"
DBF_STRING:         "Prescaler 0"       
dbpf MCAG:TS-EVR-01:Out-RB05-Src-Scale-SP "Prescaler 0"
DBF_STRING:         "Prescaler 0"       
dbpf MCAG:TS-EVR-01:Out-RB06-Src-Scale-SP "Prescaler 0"
DBF_STRING:         "Prescaler 0"       
dbpf MCAG:TS-EVR-01:Out-RB07-Src-Scale-SP "Prescaler 0"
DBF_STRING:         "Prescaler 0"       
######## Sequencer #########
dbpf MCAG:TS-EVR-01:EndEvtTicks 4
PV 'MCAG:TS-EVR-01:EndEvtTicks' not found
# Load sequencer setup
dbpf MCAG:TS-EVR-01:SoftSeq-0-Load-Cmd 1
DBF_STRING:         "1"       
# Enable sequencer
dbpf MCAG:TS-EVR-01:SoftSeq-0-Enable-Cmd 1
DBF_STRING:         "1"       
# Select run mode, "Single" needs a new Enable-Cmd every time, "Normal" needs Enable-Cmd once
dbpf MCAG:TS-EVR-01:SoftSeq-0-RunMode-Sel "Normal"
DBF_STRING:         "Normal"  
# Use ticks or microseconds
dbpf MCAG:TS-EVR-01:SoftSeq-0-TsResolution-Sel "Ticks"
DBF_STRING:         "Ticks"   
# Select trigger source for soft seq 0, trigger source 0, delay gen 0
dbpf MCAG:TS-EVR-01:SoftSeq-0-TrigSrc-0-Sel 0
DBF_STRING:         "Pulser 0"          
# Commit all the settings for the sequnce
# commit-cmd by evrseq!!! 
dbpf MCAG:TS-EVR-01:SoftSeq-0-Commit-Cmd "1"
DBF_STRING:         "Commit"  
# Route 1 hz to ouput 0 instead of 14Hz (asm)
dbpf MCAG:TS-EVR-01:DlyGen-0-Evt-Trig0-SP 125
DBF_LONG:           125 = 0x7d          
epicsEnvSet EPICS_DRIVER_PATH /home/anderssandstrom/sources/e3-mrfioc2/cellMods//base-7.0.6.1/require-4.0.0:/epics/base-7.0.6.1/require/4.0.0/siteMods
# Set the IOC Prompt String One 
epicsEnvSet IOCSH_PS1 "lab-mot-ctrl-cp-5806 > "
#
# Real Time "RT"
[?1034hlab-mot-ctrl-cp-5806 > First update ready for NTPD
